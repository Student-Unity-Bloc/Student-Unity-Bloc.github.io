<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Interactive Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
  <style>
    body { margin: 0px; height: 100%; width: 100%; }
    #map { position: absolute; width: 100%; top: 0px; bottom: 0; }
  </style>
</head>
<body>
  <div id="map"></div>
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    const mapOptions = {
      zoomSnap: 0.5,
      center: [31.904804166870857, 35.20132345423534],
      zoom: 14,
    };

    const map = L.map("map", mapOptions);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; OpenStreetMap contributors &copy; CARTO',
      maxZoom: 20
    }).addTo(map);

    // Function to load and display GeoJSON data
    function loadGeoJSON(url, options) {
      $.getJSON(url, function(data) {
        L.geoJson(data, options).addTo(map);
      }).fail(function() {
        console.error("Error loading " + url);
      });
    }

    // Options for different layers
    const pointToLayerOptions = {
      pointToLayer: function(feature, latlng) {
        return L.circleMarker(latlng, {
          radius: 8,
          color: "purple",
          weight: 1,
          opacity: 1,
          fillOpacity: 0.8
        });
      },
      onEachFeature: function(feature, layer) {
        layer.on('click', function(e) {
          alert("Name: " + (feature.properties.BUSNIESS_1 || feature.properties.name));
        });
      }
    };

    const styleOptions = {
      style: function(feature) {
        return {
          color: "pink", 
          weight: 2,
          opacity: 1,
          fillOpacity: 0 // Transparent zones
        };
      }
    };

    // Load and display Libraries
    loadGeoJSON("https://student-unity-bloc.github.io/StudentUnityBloc/Libraries.json", pointToLayerOptions);

    // Load and display Ramallah Zones
    loadGeoJSON("https://student-unity-bloc.github.io/StudentUnityBloc/RamallahZones.json", styleOptions);

    // Load and display additional GeoJSON and JSON data
    const datasets = [
      "Administrative Faculties.geojson",
      "Border.geojson",
      "Cafeteria.geojson",
      "Colleges.geojson",
      "Halls.geojson",
      "Parking.geojson",
      "Streets.json",
      "Trees.json",
      "doorways.geojson",
      "playgrounds.geojson",
      "services.geojson"
    ];

    datasets.forEach(dataset => {
      loadGeoJSON(`https://student-unity-bloc.github.io/StudentUnityBloc/${dataset}`, {
        style: function(feature) {
          return {
            color: "blue", 
            weight: 2,
            opacity: 1,
            fillOpacity: 0.5
          };
        },
        onEachFeature: function(feature, layer) {
          if (feature.properties && feature.properties.name) {
            layer.bindPopup(feature.properties.name);
          }
        }
      });
    });

  </script>
</body>
</html>

